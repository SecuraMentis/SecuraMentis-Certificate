<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <script>
  window.onload = function () {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const params = new URLSearchParams(window.location.search);
    const kap1 = params.get("k1");
    const kap2 = params.get("k2");
    const kap3 = params.get("k3");
    const kap4 = params.get("k4");
    const kap5 = params.get("k5");
    const score = params.get("score");
    const leitsatz = params.get("leitsatz");

    const fallback = (val) => val ? val : "—";

    doc.setFontSize(16);
    doc.text("Abschlussbericht – SecuraMentis", 20, 20);

    doc.setFontSize(12);
    doc.text("Kapitel 1 abgeschlossen am: " + fallback(kap1), 20, 40);
    doc.text("Kapitel 2 abgeschlossen am: " + fallback(kap2), 20, 50);
    doc.text("Kapitel 3 abgeschlossen am: " + fallback(kap3), 20, 60);
    doc.text("Kapitel 4 abgeschlossen am: " + fallback(kap4), 20, 70);
    doc.text("Kapitel 5 abgeschlossen am: " + fallback(kap5), 20, 80);

    doc.setFontSize(12);
    doc.text("Quiz Score: " + fallback(score), 20, 100);

    doc.setFontSize(11);
    doc.text("Dein persönlicher Leitsatz:", 20, 120);
    doc.setFontSize(11);
    doc.text(fallback(leitsatz), 20, 130);

    doc.save("SecuraMentis_Abschluss.pdf");
  };
</script>
</body>
</html>
